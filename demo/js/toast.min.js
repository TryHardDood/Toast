"use strict";function _classCallCheck(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,s){for(var e=0;e<s.length;e++){var i=s[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,s,e){return s&&_defineProperties(t.prototype,s),e&&_defineProperties(t,e),t}var CONTAINER_CLASS="toast-container",WRAPPER_CLASS="toast-wrapper",BsToast=function(){function t(s){var e=s.title,i=s.subtitle,a=s.content,o=s.type,n=s.delay,c=s.position,h=s.img,l=s.icon,r=s.pause_on_hover,d=s.customClass;_classCallCheck(this,t),this.id="toast-"+(document.getElementsByClassName("toast").length+1),this.title=e||"Notice!",this.subtitle=i||"",this.content=a||"",this.type=o||"info",this.delay=n||-1,this.position=c||"top-right",this.img=h,this.icon=l,this.pause_on_hover=r||!1,this.customClass=d||"",this.pause=!1,this.bg_header_class="",this.fg_header_class="",this.fg_subtitle_class="text-muted",this.fg_dismiss_class="",this.delay_or_autohide="",this.setupLayout(),this.createToast()}return _createClass(t,[{key:"setupLayout",value:function(){if(!document.getElementsByClassName(CONTAINER_CLASS+" "+this.position).length){var t=document.createElement("div");t.className=CONTAINER_CLASS+" "+this.position,document.body.insertBefore(t,document.body.firstChild)}if(!document.getElementsByClassName(CONTAINER_CLASS+" "+this.position)[0].hasChildNodes()){var s=document.createElement("div");s.className=WRAPPER_CLASS,document.getElementsByClassName(CONTAINER_CLASS+" "+this.position)[0].append(s)}}},{key:"createToast",value:function(){var s=this;if(!1!==this.pause_on_hover){var e=Math.floor(Date.now()/1e3)+this.delay/1e3;this.delay_or_autohide='data-autohide="false"',this.pause_on_hover='data-hide-timestamp="'.concat(e,'"')}else-1===this.delay?this.delay_or_autohide='data-autohide="false"':this.delay_or_autohide='data-delay="'.concat(this.delay,'"');if(!this.customClass)switch(this.type){case"info":this.bg_header_class="bg-info",this.fg_header_class="text-white",this.fg_subtitle_class="text-white",this.fg_dismiss_class="text-white";break;case"success":this.bg_header_class="bg-success",this.fg_header_class="text-white",this.fg_subtitle_class="text-white",this.fg_dismiss_class="text-white";break;case"warning":case"warn":this.bg_header_class="bg-warning",this.fg_header_class="text-white",this.fg_subtitle_class="text-white",this.fg_dismiss_class="text-white";break;case"error":case"danger":this.bg_header_class="bg-danger",this.fg_header_class="text-white",this.fg_subtitle_class="text-white",this.fg_dismiss_class="text-white"}var i='\n<div id="'.concat(this.id,'" class="toast').concat(" "+this.customClass,'" role="alert" aria-live="assertive" aria-atomic="true" ').concat(this.delay_or_autohide," ").concat(this.pause_on_hover,'>\n  <div class="toast-header ').concat(this.bg_header_class," ").concat(this.fg_header_class,'">');void 0!==this.img&&void 0===this.icon&&(i+='<img src="'.concat(this.img.src,'" class="').concat(this.img.class||"",' mr-2" alt="').concat(this.img.alt||"Image",'" ').concat(void 0!==this.img.title?'data-toggle="tooltip" title="'+this.img.title+'"':"",">")),void 0!==this.icon&&"undefined"==typeof img&&(i+=this.icon),i+='\n    <strong class="mr-auto '.concat(void 0!==this.icon?"ml-2":"",'">').concat(this.title,'</strong>\n    <small class="').concat(this.fg_subtitle_class,'">').concat(this.subtitle,'</small>\n    <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">\n      <span aria-hidden="true" class="').concat(this.fg_dismiss_class,'">&times;</span>\n    </button>\n  </div>'),""!==this.content&&(i+='<div class="toast-body">\n                        '.concat(this.content,"\n                      </div>")),i+="\n</div>\n";var a=document.createElement("div");a.innerHTML=i;var o=document.getElementsByClassName(CONTAINER_CLASS+" "+this.position)[0].firstChild.appendChild(a);if(t.toggleToast(this.id),!1!==this.pause_on_hover){setTimeout(function(){s.pause||t.toggleToast(s.id,!0)},this.delay),o.addEventListener("mouseover",function(){s.pause=!0});o.addEventListener("mouseleave",function(){var e=Math.floor(Date.now()/1e3),i=parseInt(o.children[0].dataset.hideTimestamp);s.pause=!1,e>=i&&t.toggleToast(s.id,!0)})}}}],[{key:"toggleToast",value:function(t){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(window.jQuery||window.$)$("#".concat(t)).toast(s?"hide":"show");else{var e=new bootstrap.Toast(document.getElementById(t));s?e.hide():e.show()}}}]),t}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvYXN0LmpzIl0sIm5hbWVzIjpbIkNPTlRBSU5FUl9DTEFTUyIsIldSQVBQRVJfQ0xBU1MiLCJCc1RvYXN0IiwiX3JlZiIsInRpdGxlIiwic3VidGl0bGUiLCJjb250ZW50IiwidHlwZSIsImRlbGF5IiwicG9zaXRpb24iLCJpbWciLCJpY29uIiwicGF1c2Vfb25faG92ZXIiLCJjdXN0b21DbGFzcyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJpZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImxlbmd0aCIsInBhdXNlIiwiZmdfaGVhZGVyX2NsYXNzIiwiZmdfc3VidGl0bGVfY2xhc3MiLCJkZWxheV9vcl9hdXRvaGlkZSIsInNldHVwTGF5b3V0IiwiY3JlYXRlVG9hc3QiLCJjb250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwiYm9keSIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJoYXNDaGlsZE5vZGVzIiwid3JhcHBlciIsImJnX2hlYWRlcl9jbGFzcyIsImFwcGVuZCIsImhpZGVfdGltZXN0YW1wIiwiTWF0aCIsImZsb29yIiwiRGF0ZSIsIm5vdyIsImNvbmNhdCIsImNsYXNzTmFtZSIsImZnX2Rpc21pc3NfY2xhc3MiLCJodG1sIiwic3JjIiwiYWx0IiwidG9hc3RFbCIsImlubmVySFRNTCIsImVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsInRvZ2dsZVRvYXN0IiwiX3RoaXMiLCJtb3VzZUxlYXZlIiwiZnV0dXJlIiwicGFyc2VJbnQiLCJjaGlsZHJlbiIsImRhdGFzZXQiLCJoaWRlVGltZXN0YW1wIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhpZGUiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJ3aW5kb3ciLCJjdXJyZW50IiwiJCIsInRvYXN0IiwiZ2V0RWxlbWVudEJ5SWQiLCJzaG93Il0sIm1hcHBpbmdzIjoibVpBQUEsSUFBTUEsZ0JBQWtCLGtCQUNsQkMsY0FBZ0IsZ0JBRWhCQyxtQkFFRixTQUFBQSxFQUFBQyxH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SUMsTUFBS0MsS0FBN0JDLE1BQUEsS0FDSGMsRUFBQUMsU0FBQU4sRUFBQU8sU0FBQSxHQUFBQyxRQUFBQyxlQVlETixFQUFLL0IsT0FBUSxFQVJUc0MsR0FBQUEsR0FDQ3RDLEVBQUw4QixZQUFBQyxFQUFBbkMsSUFBQSw0Q0FpQk9BLEdBQWtCLElBQWQyQyxFQUFjQyxVQUFBekMsT0FBQSxRQUFBMEMsSUFBQUQsVUFBQSxJQUFBQSxVQUFBLEdBUnpCLEdBQUFFLE9BQUlDLFFBQUpELE9BQXVCRSxFQWEzQkEsRUFBQyxJQUFBeEIsT0FBS3hCLElBQU1pRCxNQUFNTixFQUFPLE9BQVMsWUFiUCxDQUNuQnpELElBQUFBLEVBQVFnRCxJQUFBQSxVQUFpQmxDLE1BQUlDLFNBQTdCaUQsZUFBQWxELElBQ0gyQyxFQUFBTSxFQUFBTixPQUFBTSxFQUFBRSIsImZpbGUiOiJ0b2FzdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDT05UQUlORVJfQ0xBU1MgPSBcInRvYXN0LWNvbnRhaW5lclwiO1xyXG5jb25zdCBXUkFQUEVSX0NMQVNTID0gXCJ0b2FzdC13cmFwcGVyXCI7XHJcblxyXG5jbGFzcyBCc1RvYXN0IHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih7dGl0bGUsIHN1YnRpdGxlLCBjb250ZW50LCB0eXBlLCBkZWxheSwgcG9zaXRpb24sIGltZywgaWNvbiwgcGF1c2Vfb25faG92ZXIsIGN1c3RvbUNsYXNzfSkge1xyXG4gICAgICAgIHRoaXMuaWQgPSAndG9hc3QtJyArIChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0b2FzdCcpLmxlbmd0aCArIDEpO1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZSB8fCAnTm90aWNlISc7XHJcbiAgICAgICAgdGhpcy5zdWJ0aXRsZSA9IHN1YnRpdGxlIHx8ICcnO1xyXG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQgfHwgJyc7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZSB8fCAnaW5mbyc7XHJcbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5IHx8IC0xO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbiB8fCAndG9wLXJpZ2h0JztcclxuICAgICAgICB0aGlzLmltZyA9IGltZztcclxuICAgICAgICB0aGlzLmljb24gPSBpY29uO1xyXG4gICAgICAgIHRoaXMucGF1c2Vfb25faG92ZXIgPSBwYXVzZV9vbl9ob3ZlciB8fCBmYWxzZTtcclxuICAgICAgICB0aGlzLmN1c3RvbUNsYXNzID0gY3VzdG9tQ2xhc3MgfHwgJyc7XHJcblxyXG4gICAgICAgIHRoaXMucGF1c2UgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5iZ19oZWFkZXJfY2xhc3MgPSAnJztcclxuICAgICAgICB0aGlzLmZnX2hlYWRlcl9jbGFzcyA9ICcnO1xyXG4gICAgICAgIHRoaXMuZmdfc3VidGl0bGVfY2xhc3MgPSAndGV4dC1tdXRlZCc7XHJcbiAgICAgICAgdGhpcy5mZ19kaXNtaXNzX2NsYXNzID0gJyc7XHJcblxyXG4gICAgICAgIHRoaXMuZGVsYXlfb3JfYXV0b2hpZGUgPSAnJztcclxuXHJcbiAgICAgICAgdGhpcy5zZXR1cExheW91dCgpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlVG9hc3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXR1cExheW91dCgpIHtcclxuICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoQ09OVEFJTkVSX0NMQVNTICsgJyAnICsgdGhpcy5wb3NpdGlvbikubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9IENPTlRBSU5FUl9DTEFTUyArICcgJyArIHRoaXMucG9zaXRpb247XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKGNvbnRhaW5lciwgZG9jdW1lbnQuYm9keS5maXJzdENoaWxkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShDT05UQUlORVJfQ0xBU1MgKyAnICcgKyB0aGlzLnBvc2l0aW9uKVswXS5oYXNDaGlsZE5vZGVzKCkpIHtcclxuICAgICAgICAgICAgbGV0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgd3JhcHBlci5jbGFzc05hbWUgPSBXUkFQUEVSX0NMQVNTO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKENPTlRBSU5FUl9DTEFTUyArICcgJyArIHRoaXMucG9zaXRpb24pWzBdLmFwcGVuZCh3cmFwcGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlVG9hc3QoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucGF1c2Vfb25faG92ZXIgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhpZGVfdGltZXN0YW1wID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCkgKyAodGhpcy5kZWxheSAvIDEwMDApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kZWxheV9vcl9hdXRvaGlkZSA9ICdkYXRhLWF1dG9oaWRlPVwiZmFsc2VcIic7XHJcbiAgICAgICAgICAgIHRoaXMucGF1c2Vfb25faG92ZXIgPSBgZGF0YS1oaWRlLXRpbWVzdGFtcD1cIiR7aGlkZV90aW1lc3RhbXB9XCJgO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRlbGF5ID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWxheV9vcl9hdXRvaGlkZSA9ICdkYXRhLWF1dG9oaWRlPVwiZmFsc2VcIic7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlbGF5X29yX2F1dG9oaWRlID0gYGRhdGEtZGVsYXk9XCIke3RoaXMuZGVsYXl9XCJgO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJZiBjdXN0b20gY2xhc3MgaXMgZGVmaW5lZCB0aGVuIGRvbid0IHN0eWxlIHRoZSB0b2FzdCBieSBpdCdzIHR5cGUuXHJcbiAgICAgICAgaWYoIXRoaXMuY3VzdG9tQ2xhc3MpIHtcclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2luZm8nOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmdfaGVhZGVyX2NsYXNzID0gJ2JnLWluZm8nO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmdfaGVhZGVyX2NsYXNzID0gJ3RleHQtd2hpdGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmdfc3VidGl0bGVfY2xhc3MgPSAndGV4dC13aGl0ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZ19kaXNtaXNzX2NsYXNzID0gJ3RleHQtd2hpdGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgJ3N1Y2Nlc3MnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmdfaGVhZGVyX2NsYXNzID0gJ2JnLXN1Y2Nlc3MnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmdfaGVhZGVyX2NsYXNzID0gJ3RleHQtd2hpdGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmdfc3VidGl0bGVfY2xhc3MgPSAndGV4dC13aGl0ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZ19kaXNtaXNzX2NsYXNzID0gJ3RleHQtd2hpdGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgJ3dhcm5pbmcnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAnd2Fybic6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iZ19oZWFkZXJfY2xhc3MgPSAnYmctd2FybmluZyc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZ19oZWFkZXJfY2xhc3MgPSAndGV4dC13aGl0ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZ19zdWJ0aXRsZV9jbGFzcyA9ICd0ZXh0LXdoaXRlJztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZnX2Rpc21pc3NfY2xhc3MgPSAndGV4dC13aGl0ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSAnZXJyb3InOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAnZGFuZ2VyJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJnX2hlYWRlcl9jbGFzcyA9ICdiZy1kYW5nZXInO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmdfaGVhZGVyX2NsYXNzID0gJ3RleHQtd2hpdGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmdfc3VidGl0bGVfY2xhc3MgPSAndGV4dC13aGl0ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZ19kaXNtaXNzX2NsYXNzID0gJ3RleHQtd2hpdGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaHRtbCA9IGBcclxuPGRpdiBpZD1cIiR7dGhpcy5pZH1cIiBjbGFzcz1cInRvYXN0JHsnICcgKyB0aGlzLmN1c3RvbUNsYXNzfVwiIHJvbGU9XCJhbGVydFwiIGFyaWEtbGl2ZT1cImFzc2VydGl2ZVwiIGFyaWEtYXRvbWljPVwidHJ1ZVwiICR7dGhpcy5kZWxheV9vcl9hdXRvaGlkZX0gJHt0aGlzLnBhdXNlX29uX2hvdmVyfT5cclxuICA8ZGl2IGNsYXNzPVwidG9hc3QtaGVhZGVyICR7dGhpcy5iZ19oZWFkZXJfY2xhc3N9ICR7dGhpcy5mZ19oZWFkZXJfY2xhc3N9XCI+YDtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmltZyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHRoaXMuaWNvbiA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgaHRtbCArPSBgPGltZyBzcmM9XCIke3RoaXMuaW1nLnNyY31cIiBjbGFzcz1cIiR7KHRoaXMuaW1nLmNsYXNzIHx8ICcnKX0gbXItMlwiIGFsdD1cIiR7KHRoaXMuaW1nLmFsdCB8fCAnSW1hZ2UnKX1cIiAkeyh0eXBlb2YgdGhpcy5pbWcudGl0bGUgIT09ICd1bmRlZmluZWQnID8gJ2RhdGEtdG9nZ2xlPVwidG9vbHRpcFwiIHRpdGxlPVwiJyArIHRoaXMuaW1nLnRpdGxlICsgJ1wiJyA6ICcnKX0+YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5pY29uICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgaW1nID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgIGh0bWwgKz0gdGhpcy5pY29uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaHRtbCArPSBgXHJcbiAgICA8c3Ryb25nIGNsYXNzPVwibXItYXV0byAkeyh0eXBlb2YgdGhpcy5pY29uICE9PSAndW5kZWZpbmVkJykgPyAnbWwtMicgOiAnJyB9XCI+JHt0aGlzLnRpdGxlfTwvc3Ryb25nPlxyXG4gICAgPHNtYWxsIGNsYXNzPVwiJHt0aGlzLmZnX3N1YnRpdGxlX2NsYXNzfVwiPiR7dGhpcy5zdWJ0aXRsZX08L3NtYWxsPlxyXG4gICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJtbC0yIG1iLTEgY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJ0b2FzdFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPlxyXG4gICAgICA8c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIiBjbGFzcz1cIiR7dGhpcy5mZ19kaXNtaXNzX2NsYXNzfVwiPiZ0aW1lczs8L3NwYW4+XHJcbiAgICA8L2J1dHRvbj5cclxuICA8L2Rpdj5gO1xyXG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnQgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9XCJ0b2FzdC1ib2R5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5jb250ZW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaHRtbCArPSBgXHJcbjwvZGl2PlxyXG5gO1xyXG5cclxuICAgICAgICBsZXQgdG9hc3RFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRvYXN0RWwuaW5uZXJIVE1MID0gaHRtbDtcclxuXHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoQ09OVEFJTkVSX0NMQVNTICsgJyAnICsgdGhpcy5wb3NpdGlvbilbMF0uZmlyc3RDaGlsZC5hcHBlbmRDaGlsZCh0b2FzdEVsKTtcclxuICAgICAgICBCc1RvYXN0LnRvZ2dsZVRvYXN0KHRoaXMuaWQpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wYXVzZV9vbl9ob3ZlciAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgbGV0IHRpbWVvdXQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGF1c2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBCc1RvYXN0LnRvZ2dsZVRvYXN0KHRoaXMuaWQsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRpbWVvdXQsIHRoaXMuZGVsYXkpO1xyXG5cclxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhdXNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgbW91c2VMZWF2ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZ1dHVyZSA9IHBhcnNlSW50KGVsZW1lbnQuY2hpbGRyZW5bMF0uZGF0YXNldC5oaWRlVGltZXN0YW1wKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhdXNlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQgPj0gZnV0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQnNUb2FzdC50b2dnbGVUb2FzdCh0aGlzLmlkLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgbW91c2VMZWF2ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB0b2dnbGVUb2FzdChpZCwgaGlkZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKCF3aW5kb3cualF1ZXJ5ICYmICF3aW5kb3cuJCkge1xyXG4gICAgICAgICAgICBsZXQgdG9hc3QgPSBuZXcgYm9vdHN0cmFwLlRvYXN0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSk7XHJcbiAgICAgICAgICAgIGhpZGUgPyB0b2FzdC5oaWRlKCkgOiB0b2FzdC5zaG93KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJChgIyR7aWR9YCkudG9hc3QoaGlkZSA/ICdoaWRlJyA6ICdzaG93Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvYXN0LmpzIl0sIm5hbWVzIjpbIkNPTlRBSU5FUl9DTEFTUyIsIldSQVBQRVJfQ0xBU1MiLCJCc1RvYXN0IiwiX3JlZiIsInRpdGxlIiwic3VidGl0bGUiLCJjb250ZW50IiwidHlwZSIsImRlbGF5IiwicG9zaXRpb24iLCJpbWciLCJpY29uIiwicGF1c2Vfb25faG92ZXIiLCJjdXN0b21DbGFzcyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJpZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImxlbmd0aCIsInBhdXNlIiwiZmdfaGVhZGVyX2NsYXNzIiwiZmdfc3VidGl0bGVfY2xhc3MiLCJkZWxheV9vcl9hdXRvaGlkZSIsInNldHVwTGF5b3V0IiwiY3JlYXRlVG9hc3QiLCJjb250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwiYm9keSIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJoYXNDaGlsZE5vZGVzIiwid3JhcHBlciIsImJnX2hlYWRlcl9jbGFzcyIsImFwcGVuZCIsImhpZGVfdGltZXN0YW1wIiwiTWF0aCIsImZsb29yIiwiRGF0ZSIsIm5vdyIsImNvbmNhdCIsImNsYXNzTmFtZSIsImZnX2Rpc21pc3NfY2xhc3MiLCJodG1sIiwic3JjIiwiYWx0IiwidG9hc3RFbCIsImlubmVySFRNTCIsImVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsInRvZ2dsZVRvYXN0IiwiX3RoaXMiLCJtb3VzZUxlYXZlIiwiZnV0dXJlIiwicGFyc2VJbnQiLCJjaGlsZHJlbiIsImRhdGFzZXQiLCJoaWRlVGltZXN0YW1wIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhpZGUiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJ3aW5kb3ciLCJjdXJyZW50IiwiJCIsInRvYXN0IiwiZ2V0RWxlbWVudEJ5SWQiLCJzaG93Il0sIm1hcHBpbmdzIjoibVpBQUEsSUFBTUEsZ0JBQWtCLGtCQUNsQkMsY0FBZ0IsZ0JBRWhCQyxtQkFFRixTQUFBQSxFQUFBQyxH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SUMsTUFBS0MsS0FBN0JDLE1BQUEsS0FDSGMsRUFBQUMsU0FBQU4sRUFBQU8sU0FBQSxHQUFBQyxRQUFBQyxlQVlETixFQUFLL0IsT0FBUSxFQVJUc0MsR0FBQUEsR0FDQ3RDLEVBQUw4QixZQUFBQyxFQUFBbkMsSUFBQSw0Q0FpQk9BLEdBQWtCLElBQWQyQyxFQUFjQyxVQUFBekMsT0FBQSxRQUFBMEMsSUFBQUQsVUFBQSxJQUFBQSxVQUFBLEdBUnpCLEdBQUFFLE9BQUlDLFFBQUpELE9BQXVCRSxFQWEzQkEsRUFBQyxJQUFBeEIsT0FBS3hCLElBQU1pRCxNQUFNTixFQUFPLE9BQVMsWUFiUCxDQUNuQnpELElBQUFBLEVBQVFnRCxJQUFBQSxVQUFpQmxDLE1BQUlDLFNBQTdCaUQsZUFBQWxELElBQ0gyQyxFQUFBTSxFQUFBTixPQUFBTSxFQUFBRSIsImZpbGUiOiJ0b2FzdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDT05UQUlORVJfQ0xBU1MgPSBcInRvYXN0LWNvbnRhaW5lclwiO1xyXG5jb25zdCBXUkFQUEVSX0NMQVNTID0gXCJ0b2FzdC13cmFwcGVyXCI7XHJcblxyXG5jbGFzcyBCc1RvYXN0IHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih7dGl0bGUsIHN1YnRpdGxlLCBjb250ZW50LCB0eXBlLCBkZWxheSwgcG9zaXRpb24sIGltZywgaWNvbiwgcGF1c2Vfb25faG92ZXIsIGN1c3RvbUNsYXNzfSkge1xyXG4gICAgICAgIHRoaXMuaWQgPSAndG9hc3QtJyArIChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0b2FzdCcpLmxlbmd0aCArIDEpO1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZSB8fCAnTm90aWNlISc7XHJcbiAgICAgICAgdGhpcy5zdWJ0aXRsZSA9IHN1YnRpdGxlIHx8ICcnO1xyXG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQgfHwgJyc7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZSB8fCAnaW5mbyc7XHJcbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5IHx8IC0xO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbiB8fCAndG9wLXJpZ2h0JztcclxuICAgICAgICB0aGlzLmltZyA9IGltZztcclxuICAgICAgICB0aGlzLmljb24gPSBpY29uO1xyXG4gICAgICAgIHRoaXMucGF1c2Vfb25faG92ZXIgPSBwYXVzZV9vbl9ob3ZlciB8fCBmYWxzZTtcclxuICAgICAgICB0aGlzLmN1c3RvbUNsYXNzID0gY3VzdG9tQ2xhc3MgfHwgJyc7XHJcblxyXG4gICAgICAgIHRoaXMucGF1c2UgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5iZ19oZWFkZXJfY2xhc3MgPSAnJztcclxuICAgICAgICB0aGlzLmZnX2hlYWRlcl9jbGFzcyA9ICcnO1xyXG4gICAgICAgIHRoaXMuZmdfc3VidGl0bGVfY2xhc3MgPSAndGV4dC1tdXRlZCc7XHJcbiAgICAgICAgdGhpcy5mZ19kaXNtaXNzX2NsYXNzID0gJyc7XHJcblxyXG4gICAgICAgIHRoaXMuZGVsYXlfb3JfYXV0b2hpZGUgPSAnJztcclxuXHJcbiAgICAgICAgdGhpcy5zZXR1cExheW91dCgpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlVG9hc3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXR1cExheW91dCgpIHtcclxuICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoQ09OVEFJTkVSX0NMQVNTICsgJyAnICsgdGhpcy5wb3NpdGlvbikubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9IENPTlRBSU5FUl9DTEFTUyArICcgJyArIHRoaXMucG9zaXRpb247XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKGNvbnRhaW5lciwgZG9jdW1lbnQuYm9keS5maXJzdENoaWxkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShDT05UQUlORVJfQ0xBU1MgKyAnICcgKyB0aGlzLnBvc2l0aW9uKVswXS5oYXNDaGlsZE5vZGVzKCkpIHtcclxuICAgICAgICAgICAgbGV0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgd3JhcHBlci5jbGFzc05hbWUgPSBXUkFQUEVSX0NMQVNTO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKENPTlRBSU5FUl9DTEFTUyArICcgJyArIHRoaXMucG9zaXRpb24pWzBdLmFwcGVuZCh3cmFwcGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlVG9hc3QoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucGF1c2Vfb25faG92ZXIgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhpZGVfdGltZXN0YW1wID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCkgKyAodGhpcy5kZWxheSAvIDEwMDApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kZWxheV9vcl9hdXRvaGlkZSA9ICdkYXRhLWF1dG9oaWRlPVwiZmFsc2VcIic7XHJcbiAgICAgICAgICAgIHRoaXMucGF1c2Vfb25faG92ZXIgPSBgZGF0YS1oaWRlLXRpbWVzdGFtcD1cIiR7aGlkZV90aW1lc3RhbXB9XCJgO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRlbGF5ID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWxheV9vcl9hdXRvaGlkZSA9ICdkYXRhLWF1dG9oaWRlPVwiZmFsc2VcIic7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlbGF5X29yX2F1dG9oaWRlID0gYGRhdGEtZGVsYXk9XCIke3RoaXMuZGVsYXl9XCJgO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJZiBjdXN0b20gY2xhc3MgaXMgZGVmaW5lZCB0aGVuIGRvbid0IHN0eWxlIHRoZSB0b2FzdCBieSBpdCdzIHR5cGUuXHJcbiAgICAgICAgaWYoIXRoaXMuY3VzdG9tQ2xhc3MpIHtcclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2luZm8nOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmdfaGVhZGVyX2NsYXNzID0gJ2JnLWluZm8nO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmdfaGVhZGVyX2NsYXNzID0gJ3RleHQtd2hpdGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmdfc3VidGl0bGVfY2xhc3MgPSAndGV4dC13aGl0ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZ19kaXNtaXNzX2NsYXNzID0gJ3RleHQtd2hpdGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgJ3N1Y2Nlc3MnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmdfaGVhZGVyX2NsYXNzID0gJ2JnLXN1Y2Nlc3MnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmdfaGVhZGVyX2NsYXNzID0gJ3RleHQtd2hpdGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmdfc3VidGl0bGVfY2xhc3MgPSAndGV4dC13aGl0ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZ19kaXNtaXNzX2NsYXNzID0gJ3RleHQtd2hpdGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgJ3dhcm5pbmcnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAnd2Fybic6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iZ19oZWFkZXJfY2xhc3MgPSAnYmctd2FybmluZyc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZ19oZWFkZXJfY2xhc3MgPSAndGV4dC13aGl0ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZ19zdWJ0aXRsZV9jbGFzcyA9ICd0ZXh0LXdoaXRlJztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZnX2Rpc21pc3NfY2xhc3MgPSAndGV4dC13aGl0ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSAnZXJyb3InOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAnZGFuZ2VyJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJnX2hlYWRlcl9jbGFzcyA9ICdiZy1kYW5nZXInO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmdfaGVhZGVyX2NsYXNzID0gJ3RleHQtd2hpdGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmdfc3VidGl0bGVfY2xhc3MgPSAndGV4dC13aGl0ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZ19kaXNtaXNzX2NsYXNzID0gJ3RleHQtd2hpdGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaHRtbCA9IGBcclxuPGRpdiBpZD1cIiR7dGhpcy5pZH1cIiBjbGFzcz1cInRvYXN0JHsnICcgKyB0aGlzLmN1c3RvbUNsYXNzfVwiIHJvbGU9XCJhbGVydFwiIGFyaWEtbGl2ZT1cImFzc2VydGl2ZVwiIGFyaWEtYXRvbWljPVwidHJ1ZVwiICR7dGhpcy5kZWxheV9vcl9hdXRvaGlkZX0gJHt0aGlzLnBhdXNlX29uX2hvdmVyfT5cclxuICA8ZGl2IGNsYXNzPVwidG9hc3QtaGVhZGVyICR7dGhpcy5iZ19oZWFkZXJfY2xhc3N9ICR7dGhpcy5mZ19oZWFkZXJfY2xhc3N9XCI+YDtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmltZyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHRoaXMuaWNvbiA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgaHRtbCArPSBgPGltZyBzcmM9XCIke3RoaXMuaW1nLnNyY31cIiBjbGFzcz1cIiR7KHRoaXMuaW1nLmNsYXNzIHx8ICcnKX0gbXItMlwiIGFsdD1cIiR7KHRoaXMuaW1nLmFsdCB8fCAnSW1hZ2UnKX1cIiAkeyh0eXBlb2YgdGhpcy5pbWcudGl0bGUgIT09ICd1bmRlZmluZWQnID8gJ2RhdGEtdG9nZ2xlPVwidG9vbHRpcFwiIHRpdGxlPVwiJyArIHRoaXMuaW1nLnRpdGxlICsgJ1wiJyA6ICcnKX0+YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5pY29uICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgaW1nID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgIGh0bWwgKz0gdGhpcy5pY29uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaHRtbCArPSBgXHJcbiAgICA8c3Ryb25nIGNsYXNzPVwibXItYXV0byAkeyh0eXBlb2YgdGhpcy5pY29uICE9PSAndW5kZWZpbmVkJykgPyAnbWwtMicgOiAnJyB9XCI+JHt0aGlzLnRpdGxlfTwvc3Ryb25nPlxyXG4gICAgPHNtYWxsIGNsYXNzPVwiJHt0aGlzLmZnX3N1YnRpdGxlX2NsYXNzfVwiPiR7dGhpcy5zdWJ0aXRsZX08L3NtYWxsPlxyXG4gICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJtbC0yIG1iLTEgY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJ0b2FzdFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPlxyXG4gICAgICA8c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIiBjbGFzcz1cIiR7dGhpcy5mZ19kaXNtaXNzX2NsYXNzfVwiPiZ0aW1lczs8L3NwYW4+XHJcbiAgICA8L2J1dHRvbj5cclxuICA8L2Rpdj5gO1xyXG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnQgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9XCJ0b2FzdC1ib2R5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5jb250ZW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaHRtbCArPSBgXHJcbjwvZGl2PlxyXG5gO1xyXG5cclxuICAgICAgICBsZXQgdG9hc3RFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRvYXN0RWwuaW5uZXJIVE1MID0gaHRtbDtcclxuXHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoQ09OVEFJTkVSX0NMQVNTICsgJyAnICsgdGhpcy5wb3NpdGlvbilbMF0uZmlyc3RDaGlsZC5hcHBlbmRDaGlsZCh0b2FzdEVsKTtcclxuICAgICAgICBCc1RvYXN0LnRvZ2dsZVRvYXN0KHRoaXMuaWQpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wYXVzZV9vbl9ob3ZlciAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgbGV0IHRpbWVvdXQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGF1c2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBCc1RvYXN0LnRvZ2dsZVRvYXN0KHRoaXMuaWQsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRpbWVvdXQsIHRoaXMuZGVsYXkpO1xyXG5cclxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhdXNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgbW91c2VMZWF2ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZ1dHVyZSA9IHBhcnNlSW50KGVsZW1lbnQuY2hpbGRyZW5bMF0uZGF0YXNldC5oaWRlVGltZXN0YW1wKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhdXNlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQgPj0gZnV0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQnNUb2FzdC50b2dnbGVUb2FzdCh0aGlzLmlkLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgbW91c2VMZWF2ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB0b2dnbGVUb2FzdChpZCwgaGlkZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKCF3aW5kb3cualF1ZXJ5ICYmICF3aW5kb3cuJCkge1xyXG4gICAgICAgICAgICBsZXQgdG9hc3QgPSBuZXcgYm9vdHN0cmFwLlRvYXN0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSk7XHJcbiAgICAgICAgICAgIGhpZGUgPyB0b2FzdC5oaWRlKCkgOiB0b2FzdC5zaG93KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJChgIyR7aWR9YCkudG9hc3QoaGlkZSA/ICdoaWRlJyA6ICdzaG93Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdfQ==