"use strict";function _classCallCheck(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,s){for(var e=0;e<s.length;e++){var a=s[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,s,e){return s&&_defineProperties(t.prototype,s),e&&_defineProperties(t,e),t}var CONTAINER_CLASS="toast-container",WRAPPER_CLASS="toast-wrapper",BsToast=function(){function t(s){var e=s.title,a=s.subtitle,i=s.content,o=s.type,n=s.delay,c=s.position,l=s.img,h=s.pause_on_hover,r=s.customClass;_classCallCheck(this,t),this.id="toast-"+(document.getElementsByClassName("toast").length+1),this.title=e||"Notice!",this.subtitle=a||"",this.content=i||"",this.type=o||"info",this.delay=n||-1,this.position=c||"top-right",this.img=l,this.pause_on_hover=h||!1,this.customClass=r||"",this.pause=!1,this.bg_header_class="",this.fg_header_class="",this.fg_subtitle_class="text-muted",this.fg_dismiss_class="",this.delay_or_autohide="",this.setupLayout(),this.createToast()}return _createClass(t,[{key:"setupLayout",value:function(){if(!document.getElementsByClassName(CONTAINER_CLASS+" "+this.position).length){var t=document.createElement("div");t.className=CONTAINER_CLASS+" "+this.position,document.body.insertBefore(t,document.body.firstChild)}if(!document.getElementsByClassName(CONTAINER_CLASS+" "+this.position)[0].hasChildNodes()){var s=document.createElement("div");s.className=WRAPPER_CLASS,document.getElementsByClassName(CONTAINER_CLASS+" "+this.position)[0].append(s)}}},{key:"createToast",value:function(){var s=this;if(!1!==this.pause_on_hover){var e=Math.floor(Date.now()/1e3)+this.delay/1e3;this.delay_or_autohide='data-autohide="false"',this.pause_on_hover='data-hide-timestamp="'.concat(e,'"')}else-1===this.delay?this.delay_or_autohide='data-autohide="false"':this.delay_or_autohide='data-delay="'.concat(this.delay,'"');if(!this.customClass)switch(this.type){case"info":this.bg_header_class="bg-info",this.fg_header_class="text-white",this.fg_subtitle_class="text-white",this.fg_dismiss_class="text-white";break;case"success":this.bg_header_class="bg-success",this.fg_header_class="text-white",this.fg_subtitle_class="text-white",this.fg_dismiss_class="text-white";break;case"warning":case"warn":this.bg_header_class="bg-warning",this.fg_header_class="text-white",this.fg_subtitle_class="text-white",this.fg_dismiss_class="text-white";break;case"error":case"danger":this.bg_header_class="bg-danger",this.fg_header_class="text-white",this.fg_subtitle_class="text-white",this.fg_dismiss_class="text-white"}var a='\n<div id="'.concat(this.id,'" class="toast').concat(" "+this.customClass,'" role="alert" aria-live="assertive" aria-atomic="true" ').concat(this.delay_or_autohide," ").concat(this.pause_on_hover,'>\n  <div class="toast-header ').concat(this.bg_header_class," ").concat(this.fg_header_class,'">');void 0!==this.img&&(a+='<img src="'.concat(this.img.src,'" class="').concat(this.img.class||"",' mr-2" alt="').concat(this.img.alt||"Image",'" ').concat(void 0!==this.img.title?'data-toggle="tooltip" title="'+this.img.title+'"':"",">")),a+='\n    <strong class="mr-auto">'.concat(this.title,'</strong>\n    <small class="').concat(this.fg_subtitle_class,'">').concat(this.subtitle,'</small>\n    <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">\n      <span aria-hidden="true" class="').concat(this.fg_dismiss_class,'">&times;</span>\n    </button>\n  </div>'),""!==this.content&&(a+='<div class="toast-body">\n                        '.concat(this.content,"\n                      </div>")),a+="\n</div>\n";var i=document.createElement("div");i.innerHTML=a;var o=document.getElementsByClassName(CONTAINER_CLASS+" "+this.position)[0].firstChild.appendChild(i);if(t.toggleToast(this.id),!1!==this.pause_on_hover){setTimeout(function(){s.pause||t.toggleToast(s.id,!0)},this.delay),o.addEventListener("mouseover",function(){s.pause=!0});o.addEventListener("mouseleave",function(){var e=Math.floor(Date.now()/1e3),a=parseInt(o.children[0].dataset.hideTimestamp);s.pause=!1,e>=a&&t.toggleToast(s.id,!0)})}}}],[{key:"toggleToast",value:function(t){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(window.jQuery||window.$)$("#".concat(t)).toast(s?"hide":"show");else{var e=new bootstrap.Toast(document.getElementById(t));s?e.hide():e.show()}}}]),t}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvYXN0LmpzIl0sIm5hbWVzIjpbIkNPTlRBSU5FUl9DTEFTUyIsIldSQVBQRVJfQ0xBU1MiLCJCc1RvYXN0IiwiX3JlZiIsInRpdGxlIiwic3VidGl0bGUiLCJjb250ZW50IiwidHlwZSIsImRlbGF5IiwicG9zaXRpb24iLCJpbWciLCJwYXVzZV9vbl9ob3ZlciIsImN1c3RvbUNsYXNzIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImlkIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwibGVuZ3RoIiwiYmdfaGVhZGVyX2NsYXNzIiwiZmdfc3VidGl0bGVfY2xhc3MiLCJkZWxheV9vcl9hdXRvaGlkZSIsInNldHVwTGF5b3V0IiwiY3JlYXRlVG9hc3QiLCJjb250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwiYm9keSIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJwYXVzZSIsImhhc0NoaWxkTm9kZXMiLCJmZ19oZWFkZXJfY2xhc3MiLCJhcHBlbmQiLCJ3cmFwcGVyIiwiaGlkZV90aW1lc3RhbXAiLCJNYXRoIiwiZmxvb3IiLCJEYXRlIiwibm93IiwiY29uY2F0IiwiY2xhc3NOYW1lIiwiZmdfZGlzbWlzc19jbGFzcyIsImh0bWwiLCJzcmMiLCJhbHQiLCJ0b2FzdEVsIiwiaW5uZXJIVE1MIiwiZWxlbWVudCIsImFwcGVuZENoaWxkIiwidG9nZ2xlVG9hc3QiLCJfdGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJjdXJyZW50IiwiZnV0dXJlIiwicGFyc2VJbnQiLCJjaGlsZHJlbiIsImRhdGFzZXQiLCJoaWRlVGltZXN0YW1wIiwic2V0VGltZW91dCIsInRpbWVvdXQiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJ3aW5kb3ciLCJ0b2FzdCIsImJvb3RzdHJhcCIsIlRvYXN0IiwiZ2V0RWxlbWVudEJ5SWQiLCJoaWRlIiwic2hvdyJdLCJtYXBwaW5ncyI6Im1aQUFBLElBQU1BLGdCQUFrQixrQkFDbEJDLGNBQWdCLGdCQUVoQkMs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RUFBQW5DLElBQUEsNENBVWVBLEdBQVksSUFBUnNDLEVBQVFPLFVBQUExQyxPQUFBLFFBQUEyQyxJQUFBRCxVQUFBLElBQUFBLFVBQUEsR0FDbkIxRCxHQUFBQSxPQUFRK0MsUUFBUmEsT0FBeUIvQyxFQUdqQ2dDLEVBQUFBLElBQUFBLE9BQVFJLElBQUFBLE1BQUFBLEVBQWlCLE9BQXpCLFlBSFEsQ0FDSCxJQUFBWSxFQUFBLElBQUFDLFVBQUFDLE1BQUFqRCxTQUFBa0QsZUFBQW5ELElBUkxvRCxFQUFBSixFQUFBSSxPQUFBSixFQUFBSyIsImZpbGUiOiJ0b2FzdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDT05UQUlORVJfQ0xBU1MgPSBcInRvYXN0LWNvbnRhaW5lclwiO1xyXG5jb25zdCBXUkFQUEVSX0NMQVNTID0gXCJ0b2FzdC13cmFwcGVyXCI7XHJcblxyXG5jbGFzcyBCc1RvYXN0IHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih7dGl0bGUsIHN1YnRpdGxlLCBjb250ZW50LCB0eXBlLCBkZWxheSwgcG9zaXRpb24sIGltZywgcGF1c2Vfb25faG92ZXIsIGN1c3RvbUNsYXNzfSkge1xyXG4gICAgICAgIHRoaXMuaWQgPSAndG9hc3QtJyArIChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0b2FzdCcpLmxlbmd0aCArIDEpO1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZSB8fCAnTm90aWNlISc7XHJcbiAgICAgICAgdGhpcy5zdWJ0aXRsZSA9IHN1YnRpdGxlIHx8ICcnO1xyXG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQgfHwgJyc7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZSB8fCAnaW5mbyc7XHJcbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5IHx8IC0xO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbiB8fCAndG9wLXJpZ2h0JztcclxuICAgICAgICB0aGlzLmltZyA9IGltZztcclxuICAgICAgICB0aGlzLnBhdXNlX29uX2hvdmVyID0gcGF1c2Vfb25faG92ZXIgfHwgZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jdXN0b21DbGFzcyA9IGN1c3RvbUNsYXNzIHx8ICcnO1xyXG5cclxuICAgICAgICB0aGlzLnBhdXNlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuYmdfaGVhZGVyX2NsYXNzID0gJyc7XHJcbiAgICAgICAgdGhpcy5mZ19oZWFkZXJfY2xhc3MgPSAnJztcclxuICAgICAgICB0aGlzLmZnX3N1YnRpdGxlX2NsYXNzID0gJ3RleHQtbXV0ZWQnO1xyXG4gICAgICAgIHRoaXMuZmdfZGlzbWlzc19jbGFzcyA9ICcnO1xyXG5cclxuICAgICAgICB0aGlzLmRlbGF5X29yX2F1dG9oaWRlID0gJyc7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0dXBMYXlvdXQoKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVRvYXN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0dXBMYXlvdXQoKSB7XHJcbiAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKENPTlRBSU5FUl9DTEFTUyArICcgJyArIHRoaXMucG9zaXRpb24pLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBDT05UQUlORVJfQ0xBU1MgKyAnICcgKyB0aGlzLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShjb250YWluZXIsIGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoQ09OVEFJTkVSX0NMQVNTICsgJyAnICsgdGhpcy5wb3NpdGlvbilbMF0uaGFzQ2hpbGROb2RlcygpKSB7XHJcbiAgICAgICAgICAgIGxldCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gV1JBUFBFUl9DTEFTUztcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShDT05UQUlORVJfQ0xBU1MgKyAnICcgKyB0aGlzLnBvc2l0aW9uKVswXS5hcHBlbmQod3JhcHBlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVRvYXN0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBhdXNlX29uX2hvdmVyICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBjb25zdCBoaWRlX3RpbWVzdGFtcCA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApICsgKHRoaXMuZGVsYXkgLyAxMDAwKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGVsYXlfb3JfYXV0b2hpZGUgPSAnZGF0YS1hdXRvaGlkZT1cImZhbHNlXCInO1xyXG4gICAgICAgICAgICB0aGlzLnBhdXNlX29uX2hvdmVyID0gYGRhdGEtaGlkZS10aW1lc3RhbXA9XCIke2hpZGVfdGltZXN0YW1wfVwiYDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kZWxheSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVsYXlfb3JfYXV0b2hpZGUgPSAnZGF0YS1hdXRvaGlkZT1cImZhbHNlXCInO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWxheV9vcl9hdXRvaGlkZSA9IGBkYXRhLWRlbGF5PVwiJHt0aGlzLmRlbGF5fVwiYDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSWYgY3VzdG9tIGNsYXNzIGlzIGRlZmluZWQgdGhlbiBkb24ndCBzdHlsZSB0aGUgdG9hc3QgYnkgaXQncyB0eXBlLlxyXG4gICAgICAgIGlmKCF0aGlzLmN1c3RvbUNsYXNzKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdpbmZvJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJnX2hlYWRlcl9jbGFzcyA9ICdiZy1pbmZvJztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZnX2hlYWRlcl9jbGFzcyA9ICd0ZXh0LXdoaXRlJztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZnX3N1YnRpdGxlX2NsYXNzID0gJ3RleHQtd2hpdGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmdfZGlzbWlzc19jbGFzcyA9ICd0ZXh0LXdoaXRlJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlICdzdWNjZXNzJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJnX2hlYWRlcl9jbGFzcyA9ICdiZy1zdWNjZXNzJztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZnX2hlYWRlcl9jbGFzcyA9ICd0ZXh0LXdoaXRlJztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZnX3N1YnRpdGxlX2NsYXNzID0gJ3RleHQtd2hpdGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmdfZGlzbWlzc19jbGFzcyA9ICd0ZXh0LXdoaXRlJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlICd3YXJuaW5nJzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3dhcm4nOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmdfaGVhZGVyX2NsYXNzID0gJ2JnLXdhcm5pbmcnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmdfaGVhZGVyX2NsYXNzID0gJ3RleHQtd2hpdGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmdfc3VidGl0bGVfY2xhc3MgPSAndGV4dC13aGl0ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZ19kaXNtaXNzX2NsYXNzID0gJ3RleHQtd2hpdGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgJ2Vycm9yJzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2Rhbmdlcic6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iZ19oZWFkZXJfY2xhc3MgPSAnYmctZGFuZ2VyJztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZnX2hlYWRlcl9jbGFzcyA9ICd0ZXh0LXdoaXRlJztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZnX3N1YnRpdGxlX2NsYXNzID0gJ3RleHQtd2hpdGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmdfZGlzbWlzc19jbGFzcyA9ICd0ZXh0LXdoaXRlJztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGh0bWwgPSBgXHJcbjxkaXYgaWQ9XCIke3RoaXMuaWR9XCIgY2xhc3M9XCJ0b2FzdCR7JyAnICsgdGhpcy5jdXN0b21DbGFzc31cIiByb2xlPVwiYWxlcnRcIiBhcmlhLWxpdmU9XCJhc3NlcnRpdmVcIiBhcmlhLWF0b21pYz1cInRydWVcIiAke3RoaXMuZGVsYXlfb3JfYXV0b2hpZGV9ICR7dGhpcy5wYXVzZV9vbl9ob3Zlcn0+XHJcbiAgPGRpdiBjbGFzcz1cInRvYXN0LWhlYWRlciAke3RoaXMuYmdfaGVhZGVyX2NsYXNzfSAke3RoaXMuZmdfaGVhZGVyX2NsYXNzfVwiPmA7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5pbWcgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gYDxpbWcgc3JjPVwiJHt0aGlzLmltZy5zcmN9XCIgY2xhc3M9XCIkeyh0aGlzLmltZy5jbGFzcyB8fCAnJyl9IG1yLTJcIiBhbHQ9XCIkeyh0aGlzLmltZy5hbHQgfHwgJ0ltYWdlJyl9XCIgJHsodHlwZW9mIHRoaXMuaW1nLnRpdGxlICE9PSAndW5kZWZpbmVkJyA/ICdkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIiB0aXRsZT1cIicgKyB0aGlzLmltZy50aXRsZSArICdcIicgOiAnJyl9PmA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBodG1sICs9IGBcclxuICAgIDxzdHJvbmcgY2xhc3M9XCJtci1hdXRvXCI+JHt0aGlzLnRpdGxlfTwvc3Ryb25nPlxyXG4gICAgPHNtYWxsIGNsYXNzPVwiJHt0aGlzLmZnX3N1YnRpdGxlX2NsYXNzfVwiPiR7dGhpcy5zdWJ0aXRsZX08L3NtYWxsPlxyXG4gICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJtbC0yIG1iLTEgY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJ0b2FzdFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPlxyXG4gICAgICA8c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIiBjbGFzcz1cIiR7dGhpcy5mZ19kaXNtaXNzX2NsYXNzfVwiPiZ0aW1lczs8L3NwYW4+XHJcbiAgICA8L2J1dHRvbj5cclxuICA8L2Rpdj5gO1xyXG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnQgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9XCJ0b2FzdC1ib2R5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5jb250ZW50fVxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaHRtbCArPSBgXHJcbjwvZGl2PlxyXG5gO1xyXG5cclxuICAgICAgICBsZXQgdG9hc3RFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRvYXN0RWwuaW5uZXJIVE1MID0gaHRtbDtcclxuXHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoQ09OVEFJTkVSX0NMQVNTICsgJyAnICsgdGhpcy5wb3NpdGlvbilbMF0uZmlyc3RDaGlsZC5hcHBlbmRDaGlsZCh0b2FzdEVsKTtcclxuICAgICAgICBCc1RvYXN0LnRvZ2dsZVRvYXN0KHRoaXMuaWQpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wYXVzZV9vbl9ob3ZlciAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgbGV0IHRpbWVvdXQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGF1c2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBCc1RvYXN0LnRvZ2dsZVRvYXN0KHRoaXMuaWQsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRpbWVvdXQsIHRoaXMuZGVsYXkpO1xyXG5cclxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhdXNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgbW91c2VMZWF2ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZ1dHVyZSA9IHBhcnNlSW50KGVsZW1lbnQuY2hpbGRyZW5bMF0uZGF0YXNldC5oaWRlVGltZXN0YW1wKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhdXNlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQgPj0gZnV0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQnNUb2FzdC50b2dnbGVUb2FzdCh0aGlzLmlkLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgbW91c2VMZWF2ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB0b2dnbGVUb2FzdChpZCwgaGlkZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKCF3aW5kb3cualF1ZXJ5ICYmICF3aW5kb3cuJCkge1xyXG4gICAgICAgICAgICBsZXQgdG9hc3QgPSBuZXcgYm9vdHN0cmFwLlRvYXN0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSk7XHJcbiAgICAgICAgICAgIGhpZGUgPyB0b2FzdC5oaWRlKCkgOiB0b2FzdC5zaG93KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJChgIyR7aWR9YCkudG9hc3QoaGlkZSA/ICdoaWRlJyA6ICdzaG93Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdfQ==